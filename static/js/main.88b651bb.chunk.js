(window.webpackJsonpfrazilapp=window.webpackJsonpfrazilapp||[]).push([[0],{45:function(e,t,a){e.exports=a(77)},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),s=a(11),i=a(12),c=a(16),m=a(13),p=a(15),u=a(14),f=a(17),E=a(40),d=a(41),b=a(9),g={LOGIN_REQUEST:"LOGIN_REQUEST",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",PROFILE_REQUEST:"PROFILE_REQUEST",PROFILE_SUCCESS:"PROFILE_SUCCESS",PROFILE_FAILED:"PROFILE_FAILED",EDIT_PROFILE_OTP_REQUEST:"EDIT_PROFILE_OTP_REQUEST",EDIT_PROFILE_OTP_SUCCESS:"EDIT_PROFILE_OTP_SUCCESS",EDIT_PROFILE_OTP_FAILED:"EDIT_PROFILE_OTP_FAILED",FETCHING_START:"FETCHING_START",FETCHING_STOP:"FETCHING_STOP",VERIFY_OTP_SUCCESS:"VERIFY_OTP_SUCCESS"};function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var O={fetching:!1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOGIN_REQUEST:return v({},e,{fetching:!0});case g.LOGIN_SUCCESS:var a=t.response[0],n=a.email,r=a.user_id;return v({},e,{fetching:!1,loginEmail:n,loginId:r,loginFailed:!1});case g.LOGIN_FAILED:return v({},e,{fetching:!1,loginFailed:!0});default:return e}};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y={fetching:!1},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.PROFILE_REQUEST||g.FETCHING_START:return P({},e,{fetching:!0});case g.PROFILE_SUCCESS:return P({},e,{fetching:!1,profileInfo:t.response[0]});case g.PROFILE_FAILED:return P({},e,{fetching:!1,profileFailed:!0});case g.EDIT_PROFILE_OTP_REQUEST:return P({},e,{fetching:!0});case g.EDIT_PROFILE_OTP_SUCCESS:return P({},e,{fetching:!1,otpResponse:t.response,verifyOtpResponse:{}});case g.EDIT_PROFILE_OTP_FAILED:return P({},e,{fetching:!1,otpFailed:!0});case g.VERIFY_OTP_SUCCESS:return P({},e,{fetching:!1,verifyOtpResponse:t.response,otpResponse:{}});default:return e}},S=Object(f.c)({loginInfo:I,userProfile:_}),C=[d.a,Object(E.createLogger)({collapsed:!0})],w=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):f.d)(f.a.apply(void 0,C)),T=function(){return Object(f.e)(S,w)},j=a(23),R=a(18),k=a(42),L=a.n(k)()(),F=a(5),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).cameraPhoto=null,a.videoRef=r.a.createRef(),a.state={imagePreviewUrl:"",uploadImgMsg:!1,currentUploadedImg:"",dataUri:"",isCapture:!1,photCaptured:!1},a.cancelImgUpload=a.cancelImgUpload.bind(Object(F.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loginInfo,t={loginEmail:e.loginEmail,loginId:e.loginId};this.props.getProfileInfo(t)}},{key:"_handleImageChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,n=e.target.files[0];a.onloadend=function(){t.setState({file:n,imagePreviewUrl:a.result,uploadImgBtn:!0,cancelImg:!0,uploadImgMsg:!1,openImageSelector:!1})},a.readAsDataURL(n)}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.imagePreviewUrl,n=this.props.profileInfo.id;this.state.imagePreviewUrl&&fetch("http://ideaweaver.in/frazil-php/profile-image.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"profile-image="+a+"&user-id="+n}).then(function(e){return e.json()}).then(function(e){e&&t.setState({uploadImgBtn:!1,cancelImg:!1,uploadImgMsg:!0,changePicOption:!0,openImageSelector:!1,currentUploadedImg:"http://ideaweaver.in/frazil-php/"+e})})}},{key:"cancelImgUpload",value:function(){this.setState({imagePreviewUrl:this.state.currentUploadedImg,uploadImgBtn:!1,cancelImg:!1,changePicOption:!0,uploadImgMsg:!1})}},{key:"render",value:function(){var e,t=this,a=this.props.profileInfo||{},n=a.name,l=a.email,o=a.mobile,s=a.profile_img,i=a.user_id,c=a.imageCamp,m=a.smsCamp,p=a.designCamp,u=this.state,f=u.uploadImgMsg,E=u.isCapture,d=u.photCaptured,b=this.state.imagePreviewUrl,g=s;return e=b?r.a.createElement("img",{src:b}):r.a.createElement("img",{src:"".concat("http://ideaweaver.in/frazil-php/").concat(g)}),r.a.createElement("div",{className:"profile__section"},r.a.createElement("div",{id:"takePhotoByCamera",className:E&&"cameraOn"},r.a.createElement("button",{className:"take_photo_button btn btn-purple-o",onClick:function(){t.takePhoto()}}," Take photo "),r.a.createElement("button",{className:"stop_photo_button btn btn-ghost-o",onClick:function(){t.stopCamera()}}," Stop "),r.a.createElement("video",{className:d&&"videoOff",ref:this.videoRef,autoPlay:"true"}),r.a.createElement("img",{id:"capturedImage",className:d&&"imageOn",alt:"imgCamera",src:this.state.dataUri})),r.a.createElement("div",{className:"container vertical-center-box"},r.a.createElement("div",{className:"panel panel-default transparent-bg-box profile-page"},r.a.createElement("div",{className:"panel-body"},!n&&r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"fa fa-spin fa-spinner fa-3x m-t-rg"})),r.a.createElement("div",{className:"panel_section"},r.a.createElement("div",{className:"profile-img"},e,r.a.createElement("div",{className:"photo-edit"},r.a.createElement("span",{className:"fa fa-camera"}),r.a.createElement("input",{className:"fileInput",type:"file",onChange:function(e){return t._handleImageChange(e)}}))),r.a.createElement("div",{className:"previewComponent text-center"},r.a.createElement("form",{onSubmit:function(e){return t._handleSubmit(e)}},f&&r.a.createElement("p",{className:"show"},"Profile picture upload successfully!"),r.a.createElement("div",{className:"btn-group",style:{"margin-top":"5px"}},r.a.createElement("button",{className:this.state.uploadImgBtn?"btn btn-sm btn-success":"hide",type:"submit",onClick:""},"Upload"),r.a.createElement("button",{onClick:this.cancelImgUpload,className:this.state.cancelImg?"btn btn-sm btn-danger":"hide"},"Cancel")))),r.a.createElement("div",{className:"panel-row panel-row-group m-t-rg m-b-rg"},r.a.createElement("div",{className:"row-item"},r.a.createElement("span",{className:"fa fa-user fa-stack label"}),r.a.createElement("span",{className:"label-value"},n)),r.a.createElement("div",{className:"row-item"},r.a.createElement("span",{className:"fa fa-envelope fa-stack label"}),r.a.createElement("span",{className:"label-value"},l)),r.a.createElement("div",{className:"row-item"},r.a.createElement("span",{className:"fa fa-phone fa-stack label"}),r.a.createElement("span",{className:"label-value"},o))),r.a.createElement("div",{className:"text-center m-b-lg"},r.a.createElement(j.b,{to:"/edit-profile/".concat(i,"/"),className:"btn btn-purple-o"},"Edit profile"))),r.a.createElement("div",{className:"panel_section"},r.a.createElement("div",{className:"panel-row panel-row-group m-t-rg m-b-rg"},r.a.createElement("div",{onClick:"",className:"row-item",style:{background:"#66a430",color:"#fff",border:"none"}},r.a.createElement("span",{className:"fa fa-user fa-envelope fa-stack label"}),r.a.createElement("span",{className:"label-value"},"Image campaigns"),r.a.createElement("div",{className:"counts"},c),r.a.createElement("span",{className:"fa fa-stack fa-arrow-right goto-link"})),r.a.createElement("div",{onClick:"",className:"row-item",style:{background:"#3065a4",color:"#fff",border:"none"}},r.a.createElement("span",{className:"fa fa-comment fa-stack label"}),r.a.createElement("span",{className:"label-value"},"SMS campaigns"),r.a.createElement("div",{className:"counts"},m),r.a.createElement("span",{className:"fa fa-stack fa-arrow-right goto-link"})),r.a.createElement("div",{onClick:"",className:"row-item",style:{background:"#e66730",color:"#fff",border:"none"}},r.a.createElement("span",{className:"fa fa-paint-brush fa-stack label"}),r.a.createElement("span",{className:"label-value"},"Design campaigns"),r.a.createElement("div",{className:"counts"},p),r.a.createElement("span",{className:"fa fa-stack fa-arrow-right goto-link"}))))))))}}]),t}(n.Component),D=a(44),x=Object(D.create)({baseURL:"http://ideaweaver.in/frazil-php"});function G(e){return function(t){return t({type:g.PROFILE_REQUEST}),x.post("/profile.php",{email:e.loginEmail,user_id:e.loginId}).then(function(e){var a;t((a=e.data,{type:g.PROFILE_SUCCESS,response:a}))}).catch(function(){t({type:g.PROFILE_FAILED})})}}function M(e){return function(t){return t({type:g.EDIT_PROFILE_OTP_REQUEST}),x.post("/send-otp-mobile-verify.php",{userId:e.userId,mobile:e.mobile}).then(function(e){var a;t((a=e.data,{type:g.EDIT_PROFILE_OTP_SUCCESS,response:a}))}).catch(function(){t({type:g.EDIT_PROFILE_OTP_FAILED})})}}function A(e){return function(t){return t({type:g.FETCHING_START}),x.post("/update-mobile.php",{userId:e.userId,mobile:e.mobile,otp:e.otp}).then(function(e){var a;t((a=e.data,{type:g.VERIFY_OTP_SUCCESS,response:a}))}).catch(function(){t({type:g.FETCHING_STOP})})}}var Q=Object(u.b)(function(e){return{loginInfo:e.loginInfo,profileInfo:e.userProfile.profileInfo}},function(e){return{getProfileInfo:function(t){e(G(t))}}})(U),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={loginEmail:"",loginPassword:"",redirectToReferrer:""},a.handleSubmit=a.handleSubmit.bind(Object(F.a)(a)),a.getLoginInfo=a.getLoginInfo.bind(Object(F.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){e.loginInfo.loginEmail!==this.props.loginInfo.loginEmail&&L.replace("/profile")}},{key:"handleSubmit",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"getLoginInfo",value:function(){var e=this.state,t={loginEmail:e.loginEmail,loginPassword:e.loginPassword};this.props.getLoginInfo(t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container vertical-center-box"},r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("h3",null,"Login here"),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",id:"loginEmail",name:"loginEmail",value:this.state.loginEmail,onChange:this.handleSubmit,className:"form-control"})),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",id:"loginPassword",name:"loginPassword",value:this.state.loginPassword,onChange:this.handleSubmit,className:"form-control"})),r.a.createElement("button",{type:"button",onClick:this.getLoginInfo,className:"btn btn-login btn-block"},r.a.createElement("span",{className:"fa fa-spin fa-spinner"})," Submit"),r.a.createElement("div",{className:"group-anchor m-t-rg text-center"},r.a.createElement("a",{href:"javascript:void(0)",onClick:""},"Signup here"),r.a.createElement("a",{href:"javascript:void(0)",onClick:""},"Forgot password?")))),r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("h3",null,"New user, register here"),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",id:"userNameReg",className:"form-control"})),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",id:"userEmailReg",className:"form-control"})),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",id:"userPassReg",className:"form-control"})),r.a.createElement("button",{type:"button",onClick:"",className:"btn btn-login btn-block"},r.a.createElement("span",{className:"fa fa-spin fa-spinner"})," Submit"),r.a.createElement("div",{className:"group-anchor m-t-rg text-center"},r.a.createElement("a",{href:"javascript:void(0)",onClick:""},"Login here"),r.a.createElement("a",{href:"javascript:void(0)",onClick:""},"Forgot password?")))),r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("h3",null,"Forgot password?"),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"text",id:"userEmailForPass",className:"form-control"})),r.a.createElement("div",{className:"form-group m-b-rg"},r.a.createElement("label",null,"Mobile (Registered)"),r.a.createElement("input",{type:"text",id:"userMobForPass",className:"form-control"})),r.a.createElement("button",{type:"button",onClick:"",className:"btn btn-login btn-block"},r.a.createElement("span",{className:"fa fa-spin fa-spinner"})," Submit"),r.a.createElement("div",{className:"group-anchor m-t-rg text-center"},r.a.createElement("a",{href:"javascript:void(0)",onClick:""},"Login here"),r.a.createElement("a",{href:"javascript:void(0)",onClick:""},"Forgot password?")))))}}]),t}(n.Component);function H(){return{type:g.LOGIN_FAILED}}function V(e){return function(t){return t({type:g.LOGIN_REQUEST}),x.post("/login.php",{email:e.loginEmail,password:e.loginPassword}).then(function(e){var a;e.data[0].email?t((a=e.data,{type:g.LOGIN_SUCCESS,response:a})):t(H())}).catch(function(){t(H())})}}var z=Object(u.b)(function(e){return{loginInfo:e.loginInfo}},function(e){return{getLoginInfo:function(t){e(V(t))}}})(B);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach(function(t){Object(b.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.props.profileInfo,{},a.props.otpResponse,{existingMobile:""}),a.onChange=a.onChange.bind(Object(F.a)(a)),a.updateProfile=a.updateProfile.bind(Object(F.a)(a)),a.sendOTP=a.sendOTP.bind(Object(F.a)(a)),a.verifyOTP=a.verifyOTP.bind(Object(F.a)(a)),a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.otpResponse!==e.otpResponse&&this.setState({otpStatus:this.props.otpResponse.status}),this.props.verifyOtpResponse!==e.verifyOtpResponse&&this.setState({verifyOtpStatus:this.props.verifyOtpResponse.status})}},{key:"onChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"updateProfile",value:function(){console.log("update profile")}},{key:"sendOTP",value:function(){this.setState({existingMobile:this.state.mobile});var e={userId:this.state.user_id,mobile:this.state.mobile};this.props.sendOTP(e)}},{key:"verifyOTP",value:function(){var e={userId:this.state.user_id,otp:this.state.otp,mobile:this.state.mobile};this.props.verifyOTP(e)}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name,n=e.mobile,l=e.otpStatus,o=e.otp,s=e.verifyOtpStatus,i=e.existingMobile;return console.log("existingMobile",i),r.a.createElement("div",{className:"profile__section"},r.a.createElement("div",{className:"container vertical-center-box"},r.a.createElement("div",{className:"panel panel-default transparent-bg-box profile-page"},r.a.createElement("div",{className:"panel-body"},!a&&r.a.createElement("div",{className:"text-center"},r.a.createElement("span",{className:"fa fa-spin fa-spinner fa-3x m-t-rg"})),r.a.createElement("div",{className:"panel_section",style:{padding:"1rem",borderBottom:"1px solid #e2e2e2",marginBottom:"2rem"}},r.a.createElement("div",{className:"form-box m-b-lg"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{className:"label"},"Full name"),r.a.createElement("input",{name:"name",className:"form-control",onChange:this.onChange,value:a})),r.a.createElement("li",null,r.a.createElement("span",{className:"label"},"Email (Can't change)"),r.a.createElement("input",{name:"email",readonly:!0,className:"form-control",value:t})),this.props.profileInfo.mobile===this.state.mobile&&r.a.createElement("li",null,r.a.createElement("div",{className:"text-center m-b-lg"},r.a.createElement("button",{type:"button",className:"btn btn-purple-o",onClick:this.updateProfile},"Update profile")))))),r.a.createElement("div",{className:"panel_section"},r.a.createElement("div",{className:"form-box m-b-lg"},r.a.createElement("ul",null,"success"!==l&&r.a.createElement("li",null,r.a.createElement("span",{className:"label"},"Mobile"),r.a.createElement("input",{name:"mobile",className:"form-control",onChange:this.onChange,value:n}),n.length>10?r.a.createElement("small",{className:"text-error"},"Wrong mobile number"):""),this.props.profileInfo.mobile!==this.state.mobile&&10===this.state.mobile.length&&r.a.createElement("li",{className:"text-center"},r.a.createElement("button",{className:"btn btn-purple-o",onClick:this.sendOTP},"Send OTP"),r.a.createElement("button",{className:"btn btn-ghost-o",style:{marginLeft:"0.5rem"},onClick:this.cancelOTP},"Cancel")),1===s&&r.a.createElement("li",null,r.a.createElement("div",{className:"text-success"},"Mobile number has been updated.")),0===s&&r.a.createElement("li",null,r.a.createElement("div",{className:"text-error"},"Mobile number has been not updated successfully.")),"success"===l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("span",{className:"label"},"OTP"),r.a.createElement("input",{name:"otp",className:"form-control",onChange:this.onChange,value:o})),r.a.createElement("li",null,r.a.createElement("button",{className:"btn btn-purple-o",onClick:this.verifyOTP},"Verify OTP"),r.a.createElement("button",{className:"btn",onClick:this.cancelOTP},"Cancel"))))))))))}}]),t}(n.Component);a(75);var W=Object(u.b)(function(e){return{loginInfo:e.loginInfo,profileInfo:e.userProfile.profileInfo,otpResponse:e.userProfile.otpResponse,verifyOtpResponse:e.userProfile.verifyOtpResponse}},function(e){return{sendOTP:function(t){e(M(t))},verifyOTP:function(t){e(A(t))}}})(Y),J=function(){return r.a.createElement(j.a,{history:L},r.a.createElement(R.c,null,r.a.createElement(R.a,{exact:!0,path:"/",component:z}),r.a.createElement(R.a,{exact:!0,path:"/profile",component:Q}),r.a.createElement(R.a,{exact:!0,path:"/edit-profile/:userId",component:W})))},$=(a(76),T({})),q=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(u.a,{store:$},r.a.createElement("div",{className:"app"},r.a.createElement(J,null)))}}]),t}(r.a.Component);o.a.render(r.a.createElement(q,null),document.getElementById("root"));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[45,1,2]]]);
//# sourceMappingURL=main.88b651bb.chunk.js.map